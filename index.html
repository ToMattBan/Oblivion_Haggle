<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="styles\myit.css">
    <link rel="stylesheet" type="text/css" href="styles\style.css">

    <title>Oblivion Haggle</title>
</head>

<body>
    <div class="background _z0"></div>

    <form id="haggle" class="_8/12 _6/12@tabletH _4/12@laptop _fz12 _fz16@tabletH _white _poa _z1 _pxs _bdrs6 _bdwhite _bd2 _fw7">
        <div class='_df _fxww _mvxxs'>
            <span class="_1/1 _6/12@tabletH _db _tar@tabletH _mrxxs@tabletH">Disposition</span>
            <input class="_mlxxs@tabletH _bdrs6 _1/1 _4/12@tabletH" id="disposition" type="number" required />
        </div>
        <div class='_df _fxww _mvxxs'>
            <span class="_1/1 _6/12@tabletH _db _tar@tabletH _mrxxs@tabletH">Player Level Merchant</span>
            <input class="_mlxxs@tabletH _bdrs6 _1/1 _4/12@tabletH" id="playerSkill" type="number" required />
        </div>
        <div class='_df _fxww _mvxxs'>
            <span class="_1/1 _6/12@tabletH _db _tar@tabletH _mrxxs@tabletH">Player Luck</span>
            <input class="_mlxxs@tabletH _bdrs6 _1/1 _4/12@tabletH" id="playerLuck" type="number" required />
        </div>
        <div class='_df _fxww _mvxxs'>
            <span class="_1/1 _6/12@tabletH _db _tar@tabletH _mrxxs@tabletH">NPC Level Merchant</span>
            <input class="_mlxxs@tabletH _bdrs6 _1/1 _4/12@tabletH" id="merchantSkill" type="number" required />
        </div>
        <div class='_df _fxww _mvxxs'>
            <span class="_1/1 _6/12@tabletH _db _tar@tabletH _mrxxs@tabletH">NPC Luck</span>
            <input class="_mlxxs@tabletH _bdrs6 _1/1 _4/12@tabletH" id="merchantLuck" type="number" required />
        </div>

        <p class="_tac _pt _m0">
            <button class="_1/1 _6/12@tabletH _pxxs _t" id="calc" type="submit">Calculate</button>
        </p>
    </form>

    <div id="result"></div>

    <script>
        document.querySelector('#haggle').addEventListener('submit', function (e) {
            e.preventDefault()

            var disposition = parseInt(document.querySelector('#disposition').value);
            var playerSkill = parseInt(document.querySelector('#playerSkill').value);
            var playerLuck = parseInt(document.querySelector('#playerLuck').value);
            var merchantSkill = parseInt(document.querySelector('#merchantSkill').value);
            var merchantLuck = parseInt(document.querySelector('#merchantLuck').value);

            var best = Math.floor((0.5 * Math.floor(0.4 * (disposition - 10) / 4) + (100 + Math.min(playerSkill + 0.4 * (playerLuck - 50), 100) - Math.min(merchantSkill + 0.4 * (merchantLuck - 50), 100)) / 10) / 0.55)

            best = best + 39;
            best = best + '%';

            document.querySelector('#result').innerText = best;
        });
    </script>

</body>

</html>